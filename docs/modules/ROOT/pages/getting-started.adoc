= Getting Started with PojoQuery

This guide walks you through setting up PojoQuery and executing your first queries.

== Prerequisites

* Java Development Kit (JDK) 17 or later
* A build tool like Maven or Gradle
* A JDBC-compliant database (e.g., MySQL, PostgreSQL, HSQLDB)

== Installation

=== Maven

Add the PojoQuery dependency to your `pom.xml`:

[source,xml]
----
<dependency>
  <groupId>org.pojoquery</groupId>
  <artifactId>pojoquery</artifactId>
  <version>4.0.0-BETA</version>
</dependency>

<!-- Add your JDBC driver, e.g., for MySQL -->
<dependency>
    <groupId>com.mysql</groupId>
    <artifactId>mysql-connector-j</artifactId>
    <version>8.0.33</version>
    <scope>runtime</scope>
</dependency>
----

=== Gradle

[source,groovy]
----
dependencies {
    implementation 'org.pojoquery:pojoquery:4.0.0-BETA'
    runtimeOnly 'com.mysql:mysql-connector-j:8.0.33'
}
----

== Define Your Entities

Create Java classes representing your database tables. Note how relationships are modeled without cyclic references—the `DepartmentWithEmployees` subclass adds the collection:

[source,java]
----
include::example$test/examples/docs/GettingStartedExample.java[tag=entity]
----

Key points:

* `@Table` maps the class to a database table
* `@Id` marks the primary key field
* Entity references (like `department` in `Employee`) automatically create foreign key relationships
* Use subclasses to add collections without creating cycles in your entity model

== Setup

Configure the database dialect and create your schema:

[source,java]
----
include::example$test/examples/docs/GettingStartedExample.java[tag=setup]
----

The `SchemaGenerator` creates tables based on your entity classes—no manual SQL required.

== Insert Records

Insert entities using `PojoQuery.insert()`. The generated ID is automatically populated:

[source,java]
----
include::example$test/examples/docs/GettingStartedExample.java[tag=insert]
----

== Query Records

=== Query All with Ordering

[source,java]
----
include::example$test/examples/docs/GettingStartedExample.java[tag=query-all]
----

NOTE: Use `{employee}` syntax in WHERE and ORDER BY clauses—PojoQuery automatically quotes identifiers for your database.

=== Query with Filters

[source,java]
----
include::example$test/examples/docs/GettingStartedExample.java[tag=query-filter]
----

=== Find by ID

[source,java]
----
include::example$test/examples/docs/GettingStartedExample.java[tag=query-findbyid]
----

== Update Records

[source,java]
----
include::example$test/examples/docs/GettingStartedExample.java[tag=update]
----

== Delete Records

[source,java]
----
include::example$test/examples/docs/GettingStartedExample.java[tag=delete]
----

== Query with Collections

Use a subclass to fetch an entity with its related collection. PojoQuery automatically performs the JOIN:

[source,java]
----
include::example$test/examples/docs/GettingStartedExample.java[tag=query-with-collection]
----

== DataSource Configuration

For this example, we use HSQLDB in-memory. In production, use a connection pool:

[source,java]
----
include::example$test/examples/docs/GettingStartedExample.java[tag=datasource]
----

For MySQL or PostgreSQL, configure the appropriate dialect:

[source,java]
----
// For MySQL
DbContext.setDefault(DbContext.forDialect(DbContext.Dialect.MYSQL));

// For PostgreSQL
DbContext.setDefault(DbContext.forDialect(DbContext.Dialect.POSTGRES));
----

== Next Steps

* Explore the xref:features.adoc[Core Features] of PojoQuery
* Learn about the available xref:annotations.adoc[Annotations] for customization
* See more complex xref:examples.adoc[Examples] including relationships and inheritance
* Understand the xref:query-building.adoc[Query Building API]
* Configure xref:database-support.adoc[Database Support] for your database
